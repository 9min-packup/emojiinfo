<!DOCTYPE html>
<!-- Misskey サーバーの絵文字情報を取得するツール -->
<!-- 　適当に作ったのですごいやっつけ感がある -->
<html lang="ja">
    <head>
        <title>絵文字 Info</title>
        <meta charset="UTF-8" />
        <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    </head>
    <body>
        <h3>絵文字 Info</h3>
        Misskey サーバーの絵文字情報を取得するツールです...すごいやっつけ感。<br>
        URL と絵文字名を入力して検索すると情報が出てきます。<br><br>

        <form>
            <div class="form_row">
                <div class="form_tag">URL</div><div class="form_right"></div><input type="text" id="host" value=""/></div><br>
            </div>
            <div class="form_row">
                <div class="form_tag">絵文字名</div><div class="form_right"></div><input type="text" id="emoji_name" value=""/></div><br>
            </div>
        <input type="button" value="検索" onclick="search()"/>
    </form>
        <br>
        <br>
        <div id="info"></div>
    </body>
</html>

<script>

function search() {
    let host = document.getElementById('host').value
    let emoji_name = document.getElementById('emoji_name').value

    let param = {name: emoji_name,}
    console.log(host);
    console.log(emoji_name);
    axios({
        method: 'post',
        url: host + '/api/emoji',
        data: param
    })
        .then(function (response) {
            set_info(response.data)
        })
        .catch(function (error) {
            console.log(error);
    });
}

function set_info(data) {
    let info = document.getElementById('info')
    let text = 'url : <a href=\"' + data.url + '\">' + data.url  +  '<\a>\n<br>name : ' + data.name + '\n<br>category : ' + data.category + '\n<br>license : ' + data.license + '\n<br>'
    
    info.innerHTML = text
}


</script>
